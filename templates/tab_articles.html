<p>Search individual articles</p>
<form action="https://search.ebscohost.com/login.aspx" id="journalsearch" method="get">
	<div class="hidden">
		<input name="direct" value="true" type="hidden">
		<input name="scope" value="site" type="hidden">
		<input name="site" value="eds-live" type="hidden">
		<input name="authtype" value="ip,guest" type="hidden">
		<input name="custid" value="s8978330" type="hidden">
		<input name="profile" value="eds" type="hidden">
		<input name="groupid" value="main" type="hidden">
		<input name="bquery" value="" type="hidden">
	</div>
	<div class="row">
		<input type="text" name="uquery" class="search" placeholder="Search journal articles...">
		<input type="submit">
	</div>
	<select name="limit" class="searchby">
		<option value="" selected="selected">Keyword</option>
		<option value="TI ">Title</option>
		<option value="AU ">Author</option>
	</select>
	<ul>
		<li><label><input type="radio" name="target" value="eds" checked="checked">Articles</label></li>
		<li><label><input type="radio" name="target" value="vera" checked="checked">Journals and databases by title</label></li>
	</ul>
</form>
<p>Also try: Browse journals by title, View article databases</p>
<script type="text/javascript">
function clearHidden() {
	// Clear hidden values from submitted form
	jQuery( '#journalsearch .hidden' ).html('');
	jQuery( '#journalsearch .searchby' ).html('');
}

function prepEDS() {
	// Set form action
	jQuery( '#journalsearch' ).attr( 'action', 'https://search.ebscohost.com/login.aspx' );

	// Append EDS-specific hidden values
	jQuery( '#journalsearch .hidden' )
		.append( '<input name="direct" value="true" type="hidden">' )
		.append( '<input name="scope" value="site" type="hidden">' )
		.append( '<input name="site" value="eds-live" type="hidden">' )
		.append( '<input name="authtype" value="ip,guest" type="hidden">' )
		.append( '<input name="custid" value="s8978330" type="hidden">' )
		.append( '<input name="profile" value="eds" type="hidden">' )
		.append( '<input name="groupid" value="main" type="hidden">' )
		.append( '<input name="bquery" value="" type="hidden">' );

	// Set query input name
	jQuery( '#journalsearch .search' ).attr( 'name', 'uquery' );

	// Append EDS-specific limiters
	jQuery( '#journalsearch .searchby' )
		.append( '<option value="" selected="selected">Keyword</option>' )
		.append( '<option value="TI ">Title</option>' )
		.append( '<option value="AU ">Author</option>' );
}

function prepVera() {
	// Set form action
	jQuery( '#journalsearch' ).attr( 'action', 'https://owens.mit.edu/sfx_local/az/mit_all' );

	// Append Vera-specific hidden values
	jQuery( '#journalsearch .hidden' )
		.append("<input type='hidden' name='param_perform_save' value='searchTitle' />")
		.append("<input type='hidden' name='param_chinese_checkbox_save' value='0' />")
		.append("<input type='hidden' name='param_type_save' value='textSearch' />")
		.append("<input type='hidden' name='param_type_value' value='textSearch' />")
		.append("<input type='hidden' name='param_jumpToPage_value' value='' />")
		.append("<input type='hidden' name='param_services2filter_save' value='getAbstract' />")
		.append("<input type='hidden' name='param_services2filter_save' value='getFullTxt' />");

	// Set query input name
	jQuery( '#journalsearch .search' ).attr( 'name', 'param_pattern_value' );

	// Append Vera-specific limiters
	jQuery( '#journalsearch .searchby' )
		.append( '<option value="contains" selected="selected">Partial Words In Title</option>' )
		.append( '<option value="startsWith">Title Starts With</option>' )
		.append( '<option value="exactMatch">Exact Title</option>' );
}

jQuery( document ).ready( function() {
	var target = jQuery( 'input[name="target"]:checked' ).val();

	// Swap form settings as target changes
	jQuery( 'input[name="target"]' ).change( function() {
		clearHidden();
		target = jQuery( 'input[name="target"]:checked' ).val();
		if ( 'eds' == target ) {
			prepEDS();
		};
		if ( 'vera' == target ) {
			prepVera();
		};
	});

	// Mangle forms as necessary on submit
	jQuery( '#journalsearch' ).on( 'submit', function(){
		// Concatenate limiter and search query
		this.bquery.value = (this.limit.value + this.uquery.value).replace(/"/g, '&quot;');
	});
});
</script>
